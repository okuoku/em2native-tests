cmake_minimum_required(VERSION 3.20)
project(yfrm-deps NONE)

include(${CMAKE_CURRENT_LIST_DIR}/../integ/proj/projwrap.cmake)

if(NOT TGT)
    message(FATAL_ERROR "TGT is required")
endif()

set(YFRM_SUBPROJECT_BUILD ON)

set(CMAKE_POSITION_INDEPENDENT_CODE ON)

# Merge with main buildfile..?
if(TGT STREQUAL "ANGLE-Vulkan")
    set(YFRM_CWGL_USE_ANGLE ON)
    set(YFRM_CWGL_USE_VULKAN ON)
    add_subdirectory(../integ/proj/angle angle)
elseif(TGT STREQUAL "ANGLE-DirectX11")
    set(YFRM_CWGL_USE_ANGLE ON)
    set(YFRM_CWGL_USE_DX11 ON)
    add_subdirectory(../integ/proj/angle angle)
elseif(TGT STREQUAL "ANGLE-Metal")
    set(YFRM_CWGL_USE_ANGLE ON)
    set(YFRM_CWGL_USE_METAL ON)
    add_subdirectory(../integ/proj/angle angle)
elseif(TGT STREQUAL "SDL2")
    add_subdirectory(../integ/proj/sdl2 sdl2)
elseif(TGT STREQUAL "GLSLang")
    add_subdirectory(../integ/proj/glslang glslang)
elseif(TGT STREQUAL "UV")
    add_subdirectory(../proj/uv uv)
else()
    message(FATAL_ERROR "Unknown component: ${TGT}")
endif()
